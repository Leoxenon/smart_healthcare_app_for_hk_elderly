# 新增功能說明

## 1. 粵語語音指令全流程支持

### 功能描述
- **全局語音喚醒按鈕**：在所有主要頁面右下角顯示紫色麥克風按鈕（帶動畫效果）
- **實時聆聽提示**：點擊後彈出底部弹窗，顯示"正在聆聽..."和音波動畫
- **粵語指令識別**：支持常見粵語指令，如"開啟用藥提醒"、"記錄血壓"、"查看菜譜"等
- **確認機制**：識別完成後顯示識別結果，提供"確認"、"重新講過"、"取消"三個選項
- **防誤觸設計**：清晰的視覺引導和確認流程

### 支持的語音指令
- "開啟用藥提醒" / "藥物" → 導航到用藥管理
- "記錄血壓" / "數據" → 導航到健康數據
- "查看健康知識" → 導航到知識庫
- "打電話畀醫生" → 導航到聯繫人
- "緊急求助" → 觸發緊急求助
- "查看菜譜" / "食譜" → 導航到AI智能菜譜
- "睇下風險預測" → 導航到風險預測

### 組件位置
- `/components/VoiceListeningModal.tsx`
- 在 `App.tsx` 中集成全局語音按鈕

---

## 2. AI智能菜譜推薦

### 功能描述
- **個性化推薦**：根據用戶健康狀況（高血壓、糖尿病等）推薦適合的粵菜食譜
- **圖文並茂**：每道菜配有emoji圖示、營養資訊、適宜人群標籤
- **營養標籤**：顯示熱量、蛋白質、碳水化合物、鈉含量等
- **風險警告**：針對特殊人群的注意事項（如過敏警告）
- **詳細步驟**：完整的食材清單和烹調步驟
- **語音講解**：一鍵播放菜譜內容的粵語語音講解
- **收藏功能**：可保存喜愛的菜譜

### 特色菜譜示例
- 清蒸石斑魚（低脂低鈉，適合心血管疾病）
- 蓮藕排骨湯（補鈣，適合骨質疏鬆）
- 白灼菜心（高纖維，適合糖尿病）
- 紫薯燕麥粥（控血糖，抗氧化）

### 組件位置
- `/components/RecipeScreen.tsx`
- 從Dashboard的"AI智能菜譜"卡片進入

---

## 3. AI健康風險預測展示

### 功能描述
- **綜合風險儀表盤**：環形進度條顯示整體風險等級（0-100%）
- **分項風險評估**：心血管疾病、中風、糖尿病併發症三項獨立評估
- **趨勢折線圖**：過去7天風險變化趨勢可視化（使用Recharts）
- **風險等級分類**：
  - 低危（0-29%）綠色
  - 中危（30-49%）黃色
  - 中高危（50-69%）橙色
  - 高危（70-100%）紅色
- **健康警告Banner**：高危用戶顯示紅色警告提示
- **AI個性化建議**：提供4-6條優先級建議
- **一鍵採納**：快速執行建議（如記錄健康數據、查看菜譜、預約醫生）

### 組件位置
- `/components/RiskPredictionScreen.tsx`
- 從Dashboard的"AI風險預測"卡片進入

---

## 4. GIS實時救援調度可視化

### 功能描述
- **全屏地圖視圖**：黑色背景高對比度模式，網格模擬地圖
- **動態標記**：
  - 用戶位置（紅色脈衝圖標）
  - 救護車（藍色，帶彈跳動畫）
  - 社工（綠色）
  - 家人（黃色）
- **實時路線動畫**：虛線顯示救援隊伍到達路線
- **倒計時ETA**：每個救援隊伍的預計到達時間，實時更新
- **進度條**：救護車到達進度條
- **救援步驟流程**：顯示救援各階段狀態（已完成/進行中/待開始）
- **聯繫方式**：每個救援人員的電話號碼，一鍵撥打
- **緊急指引**：4步應急指南
- **語音播報**：自動播報救援狀態

### 救援隊伍示例
1. 救護車 A112 - 2.5km，預計5分鐘
2. 社工 黃姑娘 - 1.2km，預計3分鐘
3. 李女士（女兒）- 5.0km，預計12分鐘

### 組件位置
- `/components/RescueVisualization.tsx`
- 從緊急求助確認後自動進入

---

## 通用設計特點

### 無障礙設計
- ✅ 大字體（基礎字號20px）
- ✅ 高對比度配色
- ✅ 大圖標（最小44x44px）
- ✅ 語音播報功能
- ✅ 清晰視覺分區
- ✅ 簡化交互（每頁最多3個主要操作）

### 粵語本地化
- ✅ 所有文本使用繁體中文（香港）
- ✅ 語音播報使用粵語（zh-HK）
- ✅ 文化適配（粵菜菜譜、本地化表達）

### 技術實現
- React + TypeScript
- Tailwind CSS
- Recharts（圖表庫）
- Web Speech API（語音播報）
- Lucide React（圖標）

---

## 使用流程

### 語音指令使用
1. 點擊右下角紫色麥克風按鈕
2. 說出粵語指令
3. 確認識別結果
4. 自動導航到對應頁面

### 查看菜譜
1. 從Dashboard點擊"AI智能菜譜"
2. 瀏覽推薦菜譜
3. 點擊卡片查看詳情
4. 使用"語音講解"聽取完整說明
5. 收藏喜愛的菜譜

### 查看風險預測
1. 從Dashboard點擊"AI風險預測"
2. 查看綜合風險等級
3. 檢視7天趨勢圖
4. 閱讀AI建議
5. 點擊"一鍵採納"執行建議

### 緊急救援
1. 點擊緊急求助按鈕
2. 確認或等待10秒倒計時
3. 自動進入救援可視化頁面
4. 實時查看救援隊伍位置和ETA
5. 可隨時撥打救援人員電話

---

## 文件結構

```
/components
  ├── VoiceListeningModal.tsx      # 語音監聽彈窗
  ├── RecipeScreen.tsx              # AI智能菜譜頁面
  ├── RiskPredictionScreen.tsx      # AI風險預測頁面
  ├── RescueVisualization.tsx       # 救援可視化組件
  ├── Dashboard.tsx                 # 首頁（已更新）
  ├── EmergencyModal.tsx            # 緊急求助彈窗（已更新）
  └── ...

/App.tsx                            # 主應用（已更新，集成新功能）
/styles/globals.css                 # 全局樣式（已更新字體大小和動畫）
```

---

## 未來改進建議

1. **語音識別**：集成真實語音識別API（如Google Cloud Speech-to-Text）
2. **地圖服務**：使用真實地圖API（如Google Maps / OpenStreetMap）
3. **實時定位**：集成GPS定位服務
4. **AI模型**：連接真實AI風險預測模型
5. **營養數據庫**：擴充更多菜譜和營養資訊
6. **多語言支持**：增加普通話、英文支持
